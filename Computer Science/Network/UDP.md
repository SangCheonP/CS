## UDP(User Datagram Protocol)

    UDP는 비연결형, 신뢰성 없는 프로토콜로 빠르고 가벼운 데이터 전송에 적합하며, 실시간 스트리밍, 온라인 게임, DNS 등에서 주로 사용

    * Transport Layer에서 사용하는 프로토콜 *

<br>

### UDP의 특징

1. **비연결형(Connectionless)**:
   - 송신자는 데이터를 일방적으로 전송하며, 수신 확인이나 연결 설정 과정이 없음

2. **빠른 전송 속도**:
   - 연결 설정과 관리가 없으므로 TCP보다 전송 속도가 빠름

3. **신뢰성 부족**:
   - 데이터의 **순서 보장**, **전송 성공 확인**, **재전송** 같은 기능이 없음

4. **오버헤드가 적음**:
   - 헤더 크기가 작아 네트워크 부하가 적음

<br>

### UDP Header

<img src=../resources/UDP_Header.png>

- Source Port: 시작 포트
- Destination Port: 도착지 포트
- Length: 길이
- Checksum: 오류 검출
    - 중복 검사의 한 형태로, 오류 정정을 통해 공간이나 시간 속에서 송신된 자료의 무결성을 보호하는 단순한 방법

<br>

```
- 이렇게 간단하므로, TCP 보다 용량이 가볍고 송신 속도가 빠르게 작동됨.

- 그러나 확인 응답을 못하므로, TCP보다 신뢰도가 떨어짐.

- UDP는 비연결성, TCP는 연결성으로 정의할 수 있음.
```

<br>

### TCP와 UDP가 나온 배경

    - IP의 역할은 Host to Host (장치 간 통신)를 지원하는 데 그친다. 

    - IP는 장치 간 데이터 전송은 가능하지만, 하나의 장비 안에서 실행 중인 여러 프로그램 간의 통신에는 한계가 있다.  

    - 또한, IP에서 오류가 발생하면 ICMP가 이를 알려주지만, ICMP는 오류를 알리기만 하고 대처는 하지 못한다.  

이를 해결하기 위해 다음과 같은 방식이 도입되었다:  

1. **포트 번호**  
   - 장치 내 여러 프로그램이 서로 통신할 수 있도록 포트를 통해 구분  
2. **상위 프로토콜 (TCP와 UDP)**  
   - ICMP가 알려주는 오류를 처리하거나 데이터를 안정적으로 전송하기 위해 상위 계층 프로토콜 도입  

**ICMP(Internet Control Message Protocol)**  
- 네트워크 컴퓨터에서 오류 메시지를 전송받는 데 사용되는 프로토콜.  
- 주로 네트워크 문제 진단 및 오류 알림 용도로 활용됨.

<br>

### TCP와 UDP는 어떻게 오류를 해결하는가

**TCP**
-  데이터 신뢰성을 보장하며, 분실, 중복, 순서 뒤바뀜 등을 자동으로 처리함

**UDP**
- 속도와 효율성을 중시하며, 오류 처리는 IP 수준에 머무르므로 어플리케이션에서 직접 처리해야 함

<br>

### DNS(Domain Name System)에서 UDP를 사용하는 이유

1. **요청의 크기가 작다**  
   - 대부분의 DNS 요청과 응답은 크기가 작아 UDP 패킷 하나에 담길 수 있음

2. **연결 유지가 필요 없다**  
   - UDP는 연결 설정(3-way handshake) 없이 데이터를 전송하므로 속도가 빠르고 오버헤드가 적음  
   - TCP와 달리 연결 상태를 유지할 필요가 없어 효율적임  

3. **손실 처리 가능**  
   - UDP는 데이터 손실 시 재전송 등의 처리를 하지 않지만, DNS는 응답을 못 받은 경우 어플리케이션 계층에서 재요청을 보내는 방식으로 해결할 수 있음 

4. **기본 포트**  
   - DNS는 기본적으로 **포트 53번**에서 UDP를 사용  

**TCP를 사용하는 경우**  
1. **응답 크기가 512바이트를 초과할 때**  
   - UDP는 데이터그램 크기에 제한이 있어, 512바이트 이상의 데이터가 필요할 경우 TCP로 전환  
     (예: 대형 DNS Zone 파일 전송)  

2. **전송의 신뢰성이 중요한 경우**  
   - DNS 영역 전송(Zone Transfer)과 같은 작업에서는 데이터 신뢰성을 위해 TCP를 사용  

**정리**  
- **UDP**는 속도와 효율성을 위해 대부분의 DNS 요청에 사용되며, 작은 요청 크기와 연결 유지 불필요로 적합  
- **TCP**는 대용량 데이터 전송이나 신뢰성이 필요한 상황에서 사용  

<br>